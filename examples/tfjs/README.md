<h1 align=center>TensorFlow.js Tutorial</h1>
<p align=center><b>Visualize pre-trained TensorFlow.js model using TensorSpace and TensorSpace-Converter</b></p>

## Introduction

This is a tutorial to show the usage and workflow of visualizing TensorSpace.js model using TensorSpace and TensorSpace-Converter. In this tutorial, we try to convert a TensorSpace.js model of LeNet with MNIST dataset and visualize the model using TensorSpace as an example.

## Sample files

The sample files that are used in this tutorial are listed below:

* pre-trained TensorFlow.js model ([mnist.json](https://github.com/tensorspace-team/tensorspace-converter/blob/master/examples/tfjs/originalModel/mnist.json) and [mnist.weight.bin](https://github.com/tensorspace-team/tensorspace-converter/blob/master/examples/tfjs/originalModel/mnist.weights.bin))
* [TensorSpace-Converter preprocess script](https://github.com/tensorspace-team/tensorspace-converter/blob/master/examples/tfjs/script/converter.sh)
* [TensorSpace visualization code](https://github.com/tensorspace-team/tensorspace-converter/blob/master/examples/tfjs/index.html)

## Preprocess

First we will use TensorSpace-Converter to preprocess pre-trained TensorFlow.js model:
```shell
tensorspace_converter \
--input_type="tfjs" \
--output_node_names='myPadding/myConv1/myMaxPooling1/myConv2/myMaxPooling2/myDense1/myDense2/myDense3' \
../originalModel/mnist.json \
../generatedModel/
```

TensorSpace-Converter will generate preprocessed model into `generatedModel` folder, for tutorial propose, we have already generated a model which can be found in [this folder](https://github.com/tensorspace-team/tensorspace-converter/tree/master/examples/tfjs/generatedModel)

## load and visualize

Use TensorSpace API to construct visualization model, for more information about TensorSpace API, checkout [TensorSpace Documentation](https://tensorspace.org/html/docs/startIntro.html).
```javascript
let model = new TSP.models.Sequential( modelContainer );

model.add( new TSP.layers.GreyscaleInput( { shape: [ 28, 28, 1 ] } ) );
model.add( new TSP.layers.Padding2d( { padding: [ 2, 2 ] } ) );
model.add( new TSP.layers.Conv2d( { kernelSize: 5, filters: 6, strides: 1 } ) );
model.add( new TSP.layers.Pooling2d( { poolSize: [ 2, 2 ], strides: [ 2, 2 ] } ) );
model.add( new TSP.layers.Conv2d( { kernelSize: 5, filters: 16, strides: 1 } ) );
model.add( new TSP.layers.Pooling2d( { poolSize: [ 2, 2 ], strides: [ 2, 2 ] } ) );
model.add( new TSP.layers.Dense( { units: 120 } ) );
model.add( new TSP.layers.Dense( { units: 84 } ) );
model.add( new TSP.layers.Output1d( {
    units: 10,
    outputs: [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9" ]
} ) );
```

Load the model generated by TensorSpace-Converter and then initialize the TensorSpace visualization model:
```javascript
model.load( {
    type: "tfjs",
    url: './generatedModel/model.json'
} );

model.init();
```

## Result

If everything goes well, open the `index.html` file in browser, the model will display in your browser like this:
![prediction5](https://github.com/tensorspace-team/tensorspace/blob/master/assets/HelloWorld_5.jpg)
